<p>Docker部署<strong>LDAP</strong>，安装<strong>LDAP Account Manager (LAM)</strong>来网页端管理user和group</p>
<!-- more -->
<p>OpenLDAP官网：<a href="https://www.openldap.org/">https://www.openldap.org/</a></p>
<p>LDAP Account Manager官网：<a href="https://www.ldap-account-manager.org/lamcms/">https://www.ldap-account-manager.org/lamcms/</a></p>
<hr>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h4 id="Open-LDAP"><a href="#Open-LDAP" class="headerlink" title="Open LDAP"></a>Open LDAP</h4><p>可参考<a href="https://github.com/osixia/docker-openldap">https://github.com/osixia/docker-openldap</a></p>
<pre><code class="bash">docker run -d -p 389:389 --name open-ldap \
    --env LDAP_ORGANISATION=<span class="string">"ops"</span> \
    --env LDAP_DOMAIN=<span class="string">"ops.work"</span> \
    --env LDAP_ADMIN_PASSWORD=<span class="string">"*****"</span> \
    --env LDAP_BASE_DN=<span class="string">"dc=ops,dc=work"</span> \
    --detach osixia/openldap:1.5.0
</code></pre>
<h4 id="LAM"><a href="#LAM" class="headerlink" title="LAM"></a>LAM</h4><p>可参考<a href="https://github.com/LDAPAccountManager/lam">https://github.com/LDAPAccountManager/lam</a></p>
<p>环境变量请参考：<a href="https://github.com/LDAPAccountManager/lam/blob/develop/lam-packaging/docker/.env">https://github.com/LDAPAccountManager/lam/blob/develop/lam-packaging/docker/.env</a></p>
<pre><code class="bash">docker run -d -p 80:80 --name ldap-lam \
    --env LDAP_DOMAIN=<span class="string">"ops.work"</span> \
    --env LDAP_BASE_DN=<span class="string">"dc=ops,dc=work"</span> \
    --env LDAP_USERS_DN=<span class="string">"ou=people,dc=ops,dc=work"</span> \
    --env LDAP_GROUPS_DN=<span class="string">"ou=group,dc=ops,dc=work"</span> \
  --env LDAP_SERVER=<span class="string">"ldap://open-lan:389"</span> \
    --env LDAP_USER=<span class="string">"cn=admin,dc=ops,dc=work"</span> \
    --env LAM_PASSWORD=<span class="string">"*****"</span> \
    --detach osixia/openldap:1.5.0
</code></pre>
<p>我是部署在k8s里，环境变量配置如下：</p>
<p><img src="./ldap-01.png" alt=""></p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p><img src="./ldap-02.png" alt=""></p>
<p><img src="./ldap-03.png" alt=""></p>
<p><img src="./ldap-04.png" alt=""></p>
<p><img src="./ldap-05.png" alt=""></p>
<h2 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h2><p><img src="./ldap-06.png" alt=""></p>
<p><img src="./ldap-07.png" alt=""></p>
<p>完工，嘻嘻😝</p>
